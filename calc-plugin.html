<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator Plugin</title>

    <link rel="stylesheet" href="css/style.css" />

    <!-- Boostraaaaaaaaaaaaap CSS -->
    <!-- <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    /> -->

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
  </head>
  <body>
    <div class="calc" id="cont0"></div>

    <!-- <div class="container" id="cont1"></div> -->
    <!--<div class="container" id="cont2"></div> -->

    <script>
      //constructor => Blueprint

      class calculator {
        constructor(id, btnInitial, btnPrimary, btnSecondary) {
          (this.id = id),
            (this.btn = btnInitial),
            (this.btn0 = btnPrimary),
            (this.btn1 = btnSecondary);

          // console.log(this.id);
        }

        show() {
          document.getElementById(
            this.id
          ).innerHTML = `<div class="calc-container d-flex flex-col">

            <div class='calc-float calc-float-notch'>

            <span class="material-symbols-outlined notch notch--cam">
              radio_button_checked
            </span>

            <span class="material-symbols-outlined notch notch--piece ">
            unknown_med
            </span>

              </div>

            <div class="calc-float calc-float-bar">


              <span class="material-symbols-outlined">
              signal_cellular_alt
              </span>

              <span class="material-symbols-outlined">
              wifi
              </span>

              <span class="material-symbols-outlined">
              battery_horiz_075
              </span>
              </div>

            <div class="calc-display">
             <span id="swap-calc"></span>

             <span id="result"></span>
            </div>



             <div class= 'd-grid calc-operation'>
                     <button class="btn r1c1 ${this.btn1}">C</button>
                     <button class="btn r1c2 ${this.btn1}">DEL</button>
                     <button class="btn r1c3 ${this.btn1}">%</button>
                     <button class="btn r1c4 ${this.btn0}">/</button>

                     <button class="btn r2c1 ${this.btn}">7</button>
                     <button class="btn r2c2 ${this.btn}">8</button>
                     <button class="btn r2c3 ${this.btn}">9</button>
                     <button class="btn r2c4 ${this.btn0}">x</button>

                     <button class="btn r3c1 ${this.btn}">4</button>
                     <button class="btn r3c2 ${this.btn}">5</button>
                     <button class="btn r3c3 ${this.btn}">6</button>
                     <button class="btn r3c4 ${this.btn0}">-</button>

                     <button class="btn r4c1 ${this.btn}">1</button>
                     <button class="btn r4c2 ${this.btn}">2</button>
                     <button class="btn r4c3 ${this.btn}">3</button>
                     <button class="btn r4c4 ${this.btn0}">+</button>

                     <button class="btn btn--0 r5ca ${this.btn}">0</button>

                     <button class="btn r5c3 ${this.btn}">.</button>
                     <button class="btn r5c4 ${this.btn0}">=</button>
            <div>
         </div>`;

          document.querySelectorAll(`#${this.id} button`).forEach((element) => {
            // console.log(el);

            element.addEventListener("click", (event) => {
              let value = event.target.innerText;

              let screen = document.querySelector("#result");
              let swapScreen = document.querySelector("#swap-calc");

              if (value == "=") {
                // swap x -------- * and / ----------

                //-----------------SWAPPING HERE

                swapScreen.innerHTML = screen.innerHTML;

                //-----------------EVALUATION

                screen.innerHTML = eval(screen.innerHTML);

                //-----------------VALIDATION

                if (!eval(screen.innerHTML.trim())) {
                  screen.innerHTML = "Error Input";
                  return;
                }
              } else if (value.toLowerCase() == "del") {
                screen.innerHTML != value;
              } else {
                screen.innerHTML += value;
              }

              if (value.toLowerCase() == "c") {
                screen.innerHTML = "";
              } else if (value.toLowerCase() == "del") {
                // for (let index = 0; index < screen.innerHTML.length; index++) {
                // }
                // screen.innerHTML.length() - 1 += '';

                let delScreen = screen.innerHTML;

                delScreen.forEach((element) => {
                  console.log(
                    delScreen
                      .split("")
                      .slice(
                        screen.innerHTML.length - 1,
                        screen.innerHTML.length
                      )
                  );
                });

                // let delScreen = screen.innerHTML
                //   .split("")
                //   .slice(
                //     screen.innerHTML.length - 1,
                //     screen.innerHTML.length,
                //     ""
                //   );

                console.log(delScreen);
                console.log(screen.innerHTML);
              }
            });
          });
        }
      }

      new calculator(
        "cont0",
        "btn-initial",
        "btn-primary",
        "btn-secondary"
      ).show();

      // new calculator("cont1", "btn-initial").show();

      // new calculator("cont2", "btn-success").show();
    </script>

    <!-- Boostrap Script -->

    <!-- <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script> -->
  </body>
</html>
